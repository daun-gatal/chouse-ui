# ============================================
# ClickHouse Studio Environment Variables
# ============================================
# Copy this file to .env and update with your values
# For production, generate secure secrets using:
#   JWT_SECRET: openssl rand -base64 32
#   RBAC_ENCRYPTION_KEY: openssl rand -hex 32

# ============================================
# Core Server Settings
# ============================================
PORT=5521
NODE_ENV=development
STATIC_PATH=./dist
CORS_ORIGIN=*

# ============================================
# RBAC Database Configuration
# ============================================
# Database type: 'sqlite' (default) or 'postgres'
RBAC_DB_TYPE=sqlite

# SQLite configuration (used when RBAC_DB_TYPE=sqlite)
RBAC_SQLITE_PATH=./data/rbac.db

# PostgreSQL configuration (used when RBAC_DB_TYPE=postgres)
# Example: postgres://user:password@host:5432/dbname
RBAC_POSTGRES_URL=
# Alternative: You can also use DATABASE_URL (fallback)
# DATABASE_URL=
RBAC_POSTGRES_POOL_SIZE=10

# ============================================
# JWT Authentication
# ============================================
# JWT signing secret (REQUIRED in production)
# Generate with: openssl rand -base64 32
# Minimum 32 characters recommended
JWT_SECRET=your-super-secret-key-change-in-production-min-32-chars!

# JWT issuer and audience (optional, have defaults)
JWT_ISSUER=clickhouse-studio
JWT_AUDIENCE=clickhouse-studio-client

# Token expiration times
# Format: <number><unit> where unit is s (seconds), m (minutes), h (hours), d (days)
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ============================================
# Encryption
# ============================================
# Encryption key for ClickHouse connection passwords (REQUIRED in production)
# Generate with: openssl rand -hex 32
# Falls back to JWT_SECRET if not set
RBAC_ENCRYPTION_KEY=

# Salt for encryption key derivation (optional, has default)
RBAC_ENCRYPTION_SALT=clickhouse-studio-salt

# ============================================
# Admin User Seeding
# ============================================
# These are only used when creating the initial admin user
# If RBAC_ADMIN_PASSWORD is not set, default password is used
RBAC_ADMIN_EMAIL=admin@localhost
RBAC_ADMIN_USERNAME=admin
RBAC_ADMIN_PASSWORD=

# ============================================
# Legacy ClickHouse Configuration (Deprecated)
# ============================================
# These are deprecated - use RBAC connections instead
# Default URL pre-filled in login form
CLICKHOUSE_DEFAULT_URL=
# Default username
CLICKHOUSE_DEFAULT_USER=default
# Comma-separated list of preset URLs
CLICKHOUSE_PRESET_URLS=

# ============================================
# Application Metadata
# ============================================
# Application version (used in API responses)
VERSION=dev

# ============================================
# Development/CLI
# ============================================
# Set to 'yes' to confirm destructive CLI operations
# CONFIRM_RESET=yes

# ============================================
# AI Features Configuration
# ============================================
# Enable/disable AI optimizer feature (default: false)
# Set to 'true' to enable the SQL query optimizer
AI_OPTIMIZER_ENABLED=false

# AI Provider Selection (default: openai)
# Supported: openai, anthropic, google, huggingface
AI_PROVIDER=openai

# AI API Key (required when AI_OPTIMIZER_ENABLED=true)
# Get your API key from:
# - OpenAI: https://platform.openai.com/api-keys
# - Anthropic: https://console.anthropic.com/
# - Google: https://aistudio.google.com/app/apikey
# - HuggingFace: https://huggingface.co/settings/tokens
AI_API_KEY=

# AI Model Name (optional, uses provider defaults if not specified)
# OpenAI: gpt-4o-mini (default), gpt-4o, gpt-4-turbo, gpt-3.5-turbo
# Anthropic: claude-3-5-sonnet-20241022, claude-3-opus-20240229
# Google: gemini-1.5-pro, gemini-1.5-flash
# HuggingFace: meta-llama/Meta-Llama-3.1-8B-Instruct (or any compatible model)
AI_MODEL_NAME=

# AI API Base URL (optional)
# Use this to override the default API endpoint
# Examples:
#   - Azure OpenAI: https://your-resource.openai.azure.com
#   - Local LLM: http://localhost:11434/v1
#   - Proxy/Gateway: https://your-proxy.com/v1
# AI_BASE_URL=
